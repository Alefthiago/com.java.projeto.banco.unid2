CREATE DATABASE BANK_APP;

USE BANK_APP;

CREATE TABLE BK_CLIENTS (
    CLI_CPF VARCHAR(11),
    CLI_FULLNAME VARCHAR(80) NOT NULL,
    CLI_PASSWORD VARCHAR(80) NOT NULL,
    CONSTRAINT CLI_PK PRIMARY KEY (CLI_CPF)
);

CREATE TABLE BK_ACCOUNT (
    ACT_NUMBER BIGINT,
    ACT_TYPE VARCHAR(45) NOT NULL,
    ACT_BALANCE FLOAT NOT NULL,
    ACT_OPENING_DATE DATE NOT NULL,
    ACT_STATUS TINYINT NOT NULL,
    CLI_CPF VARCHAR(11),
    CONSTRAINT ACT_PK PRIMARY KEY (ACT_NUMBER),
    CONSTRAINT ACT_FK FOREIGN KEY (CLI_CPF) REFERENCES BK_CLIENTS (CLI_CPF)
);

CREATE TABLE BK_TRANSACTION_RECORD (
    TR_NUMBER INT,
    TR_ORIGIN_NUMBER_ACCOUNT BIGINT NOT NULL,
    TR_DESTINY_NUMBER_ACCOUNT BIGINT NOT NULL,
    TR_DATE_TRANSACTION DATE NOT NULL,
    TR_VALUE_TRANSACTION FLOAT NOT NULL,
    CONSTRAINT TR_FK PRIMARY KEY (TR_NUMBER)
);

CREATE TABLE BK_ACCOUNT_BK_TRANSACTION_RECORD (
    ATR_ACCOUNT_NUMBER BIGINT,
    ATR_TRANSACTION_NUMBER INT,
    CONSTRAINT ATR_PK PRIMARY KEY (ATR_ACCOUNT_NUMBER, ATR_TRANSACTION_NUMBER),
    CONSTRAINT ATR_FK_ACCOUNT FOREIGN KEY (ATR_ACCOUNT_NUMBER) REFERENCES BK_ACCOUNT (ACT_NUMBER),
    CONSTRAINT ATR_FK_TRANSACAO FOREIGN KEY (ATR_TRANSACTION_NUMBER) REFERENCES BK_TRANSACTION_RECORD (TR_NUMBER)
);
